{"charon_version":"0.1.140","translated":{"crate_name":"bad","options":{"ullbc":false,"lib":false,"bin":null,"mir_promoted":false,"mir_optimized":false,"mir":null,"input_file":null,"read_llbc":null,"dest_dir":null,"dest_file":null,"use_polonius":false,"skip_borrowck":false,"monomorphize":false,"monomorphize_mut":null,"extract_opaque_bodies":false,"translate_all_methods":false,"include":[],"opaque":[],"exclude":["core::ops::drop::Drop","{impl core::ops::drop::Drop for _}"],"remove_associated_types":["*"],"hide_marker_traits":true,"remove_adt_clauses":false,"hide_allocator":true,"remove_unused_self_clauses":true,"add_drop_bounds":false,"start_from":[],"no_cargo":false,"rustc_args":[],"cargo_args":[],"abort_on_error":false,"error_on_warnings":false,"no_serialize":false,"print_original_ullbc":false,"print_ullbc":false,"print_built_llbc":false,"print_llbc":false,"no_merge_goto_chains":false,"no_ops_to_function_calls":false,"raw_boxes":false,"preset":"Aeneas"},"target_information":{"target_pointer_size":8,"is_little_endian":true},"item_names":[{"key":{"Fun":6},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["Clone",0]},{"Ident":["clone_from",0]}]},{"key":{"TraitDecl":3},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["Destruct",0]}]},{"key":{"Type":0},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["Destruct",0]},{"Ident":["{vtable}",0]}]},{"key":{"Fun":2},"value":[{"Ident":["bad",0]},{"Ident":["mutate_x",0]}]},{"key":{"Fun":7},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["Destruct",0]},{"Ident":["drop_in_place",0]}]},{"key":{"Fun":5},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["Clone",0]},{"Ident":["clone",0]}]},{"key":{"Type":1},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["MetaSized",0]},{"Ident":["{vtable}",0]}]},{"key":{"TraitDecl":0},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["Clone",0]}]},{"key":{"TraitDecl":2},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["MetaSized",0]}]},{"key":{"Fun":3},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["impls",0]},{"Impl":{"Trait":0}},{"Ident":["clone",0]}]},{"key":{"Fun":1},"value":[{"Ident":["bad",0]},{"Ident":["main",0]}]},{"key":{"TraitDecl":1},"value":[{"Ident":["core",0]},{"Ident":["marker",0]},{"Ident":["Sized",0]}]},{"key":{"TraitImpl":0},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["impls",0]},{"Impl":{"Trait":0}}]},{"key":{"Fun":4},"value":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["impls",0]},{"Impl":{"Trait":0}},{"Ident":["clone_from",0]}]}],"short_names":[{"key":{"Fun":4},"value":[{"Impl":{"Trait":0}},{"Ident":["clone_from",0]}]},{"key":{"Fun":7},"value":[{"Ident":["drop_in_place",0]}]},{"key":{"TraitDecl":0},"value":[{"Ident":["Clone",0]}]},{"key":{"Fun":2},"value":[{"Ident":["mutate_x",0]}]},{"key":{"TraitImpl":0},"value":[{"Impl":{"Trait":0}}]},{"key":{"TraitDecl":3},"value":[{"Ident":["Destruct",0]}]},{"key":{"Fun":3},"value":[{"Impl":{"Trait":0}},{"Ident":["clone",0]}]},{"key":{"TraitDecl":2},"value":[{"Ident":["MetaSized",0]}]},{"key":{"TraitDecl":1},"value":[{"Ident":["Sized",0]}]},{"key":{"Fun":1},"value":[{"Ident":["main",0]}]}],"files":[{"name":{"Local":"src/main.rs"},"crate_name":"bad","contents":"fn main() {\n    let mut x = 0;\n    mutate_x(x.clone());\n    assert!(x == 3);\n}\n\nfn mutate_x(mut x: i32) {\n    x = 3;\n}"},{"name":{"Local":"/rustc/library/core/src/clone.rs"},"crate_name":"core","contents":null},{"name":{"Local":"/rustc/library/core/src/lib.rs"},"crate_name":"core","contents":null},{"name":{"Local":"/rustc/library/core/src/panicking.rs"},"crate_name":"core","contents":null},{"name":{"Local":"/rustc/library/core/src/marker.rs"},"crate_name":"core","contents":null}],"type_decls":[null,null],"fun_decls":[{"def_id":0,"item_meta":{"name":[{"Ident":["UNIT_METADATA",0]}],"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[],"inline":null,"rename":null,"public":false},"is_local":false,"opacity":"Foreign","lang_item":null},"signature":{"is_unsafe":false,"generics":{"regions":[],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"inputs":[],"output":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},"src":"TopLevel","is_global_initializer":0,"body":{"Ok":{"Structured":{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"locals":{"arg_count":0,"locals":[{"index":0,"name":null,"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}}]},"comments":[],"body":{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"statements":[{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"id":1,"kind":{"Assign":[{"kind":{"Local":0},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"Aggregate":[{"Adt":[{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},null,null]},[]]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"id":0,"kind":"Return","comments_before":[]}]}}}}},{"def_id":1,"item_meta":{"name":[{"Ident":["bad",0]},{"Ident":["main",0]}],"span":{"data":{"file_id":0,"beg":{"line":1,"col":0},"end":{"line":5,"col":1}},"generated_from_span":null},"source_text":"fn main() {\n    let mut x = 0;\n    mutate_x(x.clone());\n    assert!(x == 3);\n}","attr_info":{"attributes":[],"inline":null,"rename":null,"public":false},"is_local":true,"opacity":"Transparent","lang_item":null},"signature":{"is_unsafe":false,"generics":{"regions":[],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"inputs":[],"output":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},"src":"TopLevel","is_global_initializer":null,"body":{"Ok":{"Structured":{"span":{"data":{"file_id":0,"beg":{"line":1,"col":0},"end":{"line":5,"col":1}},"generated_from_span":null},"locals":{"arg_count":0,"locals":[{"index":0,"name":null,"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"index":1,"name":"x","ty":{"Literal":{"Int":"I32"}}},{"index":2,"name":null,"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"index":3,"name":null,"ty":{"Literal":{"Int":"I32"}}},{"index":4,"name":null,"ty":{"Ref":["Erased",{"Literal":{"Int":"I32"}},"Shared"]}},{"index":5,"name":null,"ty":{"Literal":"Bool"}},{"index":6,"name":null,"ty":{"Literal":{"Int":"I32"}}}]},"comments":[],"body":{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":5,"col":1}},"generated_from_span":null},"statements":[{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"id":28,"kind":{"Assign":[{"kind":{"Local":0},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"Aggregate":[{"Adt":[{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},null,null]},[]]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":2,"col":8},"end":{"line":2,"col":13}},"generated_from_span":null},"id":29,"kind":{"StorageLive":1},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":2,"col":16},"end":{"line":2,"col":17}},"generated_from_span":null},"id":30,"kind":{"Assign":[{"kind":{"Local":1},"ty":{"Literal":{"Int":"I32"}}},{"Use":{"Const":{"kind":{"Literal":{"Scalar":{"Signed":["I32","0"]}}},"ty":{"Literal":{"Int":"I32"}}}}}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":4},"end":{"line":3,"col":23}},"generated_from_span":null},"id":31,"kind":{"StorageLive":2},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":13},"end":{"line":3,"col":22}},"generated_from_span":null},"id":32,"kind":{"StorageLive":3},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":13},"end":{"line":3,"col":14}},"generated_from_span":null},"id":33,"kind":{"StorageLive":4},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":13},"end":{"line":3,"col":14}},"generated_from_span":null},"id":34,"kind":{"Assign":[{"kind":{"Local":4},"ty":{"Ref":["Erased",{"Literal":{"Int":"I32"}},"Shared"]}},{"Ref":{"place":{"kind":{"Local":1},"ty":{"Literal":{"Int":"I32"}}},"kind":"Shared","ptr_metadata":{"Copy":{"kind":{"Global":{"id":0,"generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}}}}}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":13},"end":{"line":3,"col":22}},"generated_from_span":null},"id":27,"kind":{"Call":{"func":{"Regular":{"kind":{"Fun":{"Regular":3}},"generics":{"regions":["Erased"],"types":[],"const_generics":[],"trait_refs":[]}}},"args":[{"Move":{"kind":{"Local":4},"ty":{"Ref":["Erased",{"Literal":{"Int":"I32"}},"Shared"]}}}],"dest":{"kind":{"Local":3},"ty":{"Literal":{"Int":"I32"}}}}},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":21},"end":{"line":3,"col":22}},"generated_from_span":null},"id":26,"kind":{"StorageDead":4},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":4},"end":{"line":3,"col":23}},"generated_from_span":null},"id":25,"kind":{"Call":{"func":{"Regular":{"kind":{"Fun":{"Regular":2}},"generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}},"args":[{"Move":{"kind":{"Local":3},"ty":{"Literal":{"Int":"I32"}}}}],"dest":{"kind":{"Local":2},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}}}},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":22},"end":{"line":3,"col":23}},"generated_from_span":null},"id":7,"kind":{"StorageDead":3},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":3,"col":23},"end":{"line":3,"col":24}},"generated_from_span":null},"id":8,"kind":{"StorageDead":2},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":12},"end":{"line":4,"col":18}},"generated_from_span":null},"id":10,"kind":{"StorageLive":5},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":12},"end":{"line":4,"col":13}},"generated_from_span":null},"id":11,"kind":{"StorageLive":6},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":12},"end":{"line":4,"col":13}},"generated_from_span":null},"id":12,"kind":{"Assign":[{"kind":{"Local":6},"ty":{"Literal":{"Int":"I32"}}},{"Use":{"Copy":{"kind":{"Local":1},"ty":{"Literal":{"Int":"I32"}}}}}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":12},"end":{"line":4,"col":18}},"generated_from_span":null},"id":13,"kind":{"Assign":[{"kind":{"Local":5},"ty":{"Literal":"Bool"}},{"BinaryOp":["Eq",{"Move":{"kind":{"Local":6},"ty":{"Literal":{"Int":"I32"}}}},{"Const":{"kind":{"Literal":{"Scalar":{"Signed":["I32","3"]}}},"ty":{"Literal":{"Int":"I32"}}}}]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":4},"end":{"line":4,"col":19}},"generated_from_span":null},"id":6,"kind":{"Switch":{"If":[{"Move":{"kind":{"Local":5},"ty":{"Literal":"Bool"}}},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":12},"end":{"line":4,"col":18}},"generated_from_span":null},"statements":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":4},"end":{"line":4,"col":19}},"generated_from_span":null},"statements":[{"span":{"data":{"file_id":0,"beg":{"line":4,"col":17},"end":{"line":4,"col":18}},"generated_from_span":null},"id":4,"kind":{"StorageDead":6},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":4},"end":{"line":4,"col":19}},"generated_from_span":null},"id":3,"kind":{"Abort":{"Panic":[{"Ident":["core",0]},{"Ident":["panicking",0]},{"Ident":["panic",0]}]}},"comments_before":[]}]}]}},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":17},"end":{"line":4,"col":18}},"generated_from_span":null},"id":15,"kind":{"StorageDead":6},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":4,"col":18},"end":{"line":4,"col":19}},"generated_from_span":null},"id":19,"kind":{"StorageDead":5},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":1,"col":10},"end":{"line":5,"col":1}},"generated_from_span":null},"id":23,"kind":{"Assign":[{"kind":{"Local":0},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"Aggregate":[{"Adt":[{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},null,null]},[]]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":5,"col":0},"end":{"line":5,"col":1}},"generated_from_span":null},"id":24,"kind":{"StorageDead":1},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":5,"col":1},"end":{"line":5,"col":1}},"generated_from_span":null},"id":14,"kind":"Return","comments_before":[]}]}}}}},{"def_id":2,"item_meta":{"name":[{"Ident":["bad",0]},{"Ident":["mutate_x",0]}],"span":{"data":{"file_id":0,"beg":{"line":7,"col":0},"end":{"line":9,"col":1}},"generated_from_span":null},"source_text":"fn mutate_x(mut x: i32) {\n    x = 3;\n}","attr_info":{"attributes":[],"inline":null,"rename":null,"public":false},"is_local":true,"opacity":"Transparent","lang_item":null},"signature":{"is_unsafe":false,"generics":{"regions":[],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"inputs":[{"Literal":{"Int":"I32"}}],"output":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},"src":"TopLevel","is_global_initializer":null,"body":{"Ok":{"Structured":{"span":{"data":{"file_id":0,"beg":{"line":7,"col":0},"end":{"line":9,"col":1}},"generated_from_span":null},"locals":{"arg_count":1,"locals":[{"index":0,"name":null,"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"index":1,"name":"x","ty":{"Literal":{"Int":"I32"}}}]},"comments":[],"body":{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":9,"col":1}},"generated_from_span":null},"statements":[{"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"id":36,"kind":{"Assign":[{"kind":{"Local":0},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"Aggregate":[{"Adt":[{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},null,null]},[]]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":8,"col":4},"end":{"line":8,"col":9}},"generated_from_span":null},"id":37,"kind":{"Assign":[{"kind":{"Local":1},"ty":{"Literal":{"Int":"I32"}}},{"Use":{"Const":{"kind":{"Literal":{"Scalar":{"Signed":["I32","3"]}}},"ty":{"Literal":{"Int":"I32"}}}}}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":7,"col":24},"end":{"line":9,"col":1}},"generated_from_span":null},"id":40,"kind":{"Assign":[{"kind":{"Local":0},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}}},{"Aggregate":[{"Adt":[{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},null,null]},[]]}]},"comments_before":[]},{"span":{"data":{"file_id":0,"beg":{"line":9,"col":1},"end":{"line":9,"col":1}},"generated_from_span":null},"id":35,"kind":"Return","comments_before":[]}]}}}}},{"def_id":3,"item_meta":{"name":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["impls",0]},{"Impl":{"Trait":0}},{"Ident":["clone",0]}],"span":{"data":{"file_id":1,"beg":{"line":581,"col":20},"end":{"line":581,"col":43}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[],"inline":"Always","rename":null,"public":true},"is_local":false,"opacity":"Foreign","lang_item":null},"signature":{"is_unsafe":false,"generics":{"regions":[{"index":0,"name":null}],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"inputs":[{"Ref":[{"Var":{"Free":0}},{"Literal":{"Int":"I32"}},"Shared"]}],"output":{"Literal":{"Int":"I32"}}},"src":{"TraitImpl":{"impl_ref":{"id":0,"generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},"trait_ref":{"id":0,"generics":{"regions":[],"types":[{"Literal":{"Int":"I32"}}],"const_generics":[],"trait_refs":[]}},"item_name":"clone","reuses_default":true}},"is_global_initializer":null,"body":{"Err":null}},null,{"def_id":5,"item_meta":{"name":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["Clone",0]},{"Ident":["clone",0]}],"span":{"data":{"file_id":1,"beg":{"line":236,"col":4},"end":{"line":236,"col":28}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[{"DocComment":" Returns a duplicate of the value."},{"DocComment":""},{"DocComment":" Note that what \"duplicate\" means varies by type:"},{"DocComment":" - For most types, this creates a deep, independent copy"},{"DocComment":" - For reference types like `&T`, this creates another reference to the same value"},{"DocComment":" - For smart pointers like [`Arc`] or [`Rc`], this increments the reference count"},{"DocComment":"   but still points to the same underlying data"},{"DocComment":""},{"DocComment":" [`Arc`]: ../../std/sync/struct.Arc.html"},{"DocComment":" [`Rc`]: ../../std/rc/struct.Rc.html"},{"DocComment":""},{"DocComment":" # Examples"},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" # #![allow(noop_method_call)]"},{"DocComment":" let hello = \"Hello\"; // &str implements Clone"},{"DocComment":""},{"DocComment":" assert_eq!(\"Hello\", hello.clone());"},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" Example with a reference-counted type:"},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" use std::sync::{Arc, Mutex};"},{"DocComment":""},{"DocComment":" let data = Arc::new(Mutex::new(vec![1, 2, 3]));"},{"DocComment":" let data_clone = data.clone(); // Creates another Arc pointing to the same Mutex"},{"DocComment":""},{"DocComment":" {"},{"DocComment":"     let mut lock = data.lock().unwrap();"},{"DocComment":"     lock.push(4);"},{"DocComment":" }"},{"DocComment":""},{"DocComment":" // Changes are visible through the clone because they share the same underlying data"},{"DocComment":" assert_eq!(*data_clone.lock().unwrap(), vec![1, 2, 3, 4]);"},{"DocComment":" ```"}],"inline":null,"rename":null,"public":true},"is_local":false,"opacity":"Foreign","lang_item":"clone_fn"},"signature":{"is_unsafe":false,"generics":{"regions":[{"index":0,"name":null}],"types":[{"index":0,"name":"Self"}],"const_generics":[],"trait_clauses":[{"clause_id":0,"span":{"data":{"file_id":0,"beg":{"line":1,"col":0},"end":{"line":1,"col":0}},"generated_from_span":null},"origin":"WhereClauseOnFn","trait_":{"regions":[],"skip_binder":{"id":0,"generics":{"regions":[],"types":[{"TypeVar":{"Free":0}}],"const_generics":[],"trait_refs":[]}}}}],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"inputs":[{"Ref":[{"Var":{"Free":0}},{"TypeVar":{"Free":0}},"Shared"]}],"output":{"TypeVar":{"Free":0}}},"src":{"TraitDecl":{"trait_ref":{"id":0,"generics":{"regions":[],"types":[{"TypeVar":{"Free":0}}],"const_generics":[],"trait_refs":[]}},"item_name":"clone","has_default":false}},"is_global_initializer":null,"body":{"Err":null}},null,null],"global_decls":[{"def_id":0,"item_meta":{"name":[{"Ident":["UNIT_METADATA",0]}],"span":{"data":{"file_id":0,"beg":{"line":0,"col":0},"end":{"line":0,"col":0}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[],"inline":null,"rename":null,"public":false},"is_local":false,"opacity":"Foreign","lang_item":null},"generics":{"regions":[],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"ty":{"Adt":{"id":"Tuple","generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}}},"src":"TopLevel","global_kind":"NamedConst","init":0}],"trait_decls":[{"def_id":0,"item_meta":{"name":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["Clone",0]}],"span":{"data":{"file_id":1,"beg":{"line":194,"col":0},"end":{"line":194,"col":28}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[{"DocComment":" A common trait that allows explicit creation of a duplicate value."},{"DocComment":""},{"DocComment":" Calling [`clone`] always produces a new value."},{"DocComment":" However, for types that are references to other data (such as smart pointers or references),"},{"DocComment":" the new value may still point to the same underlying data, rather than duplicating it."},{"DocComment":" See [`Clone::clone`] for more details."},{"DocComment":""},{"DocComment":" This distinction is especially important when using `#[derive(Clone)]` on structs containing"},{"DocComment":" smart pointers like `Arc<Mutex<T>>` - the cloned struct will share mutable state with the"},{"DocComment":" original."},{"DocComment":""},{"DocComment":" Differs from [`Copy`] in that [`Copy`] is implicit and an inexpensive bit-wise copy, while"},{"DocComment":" `Clone` is always explicit and may or may not be expensive. In order to enforce"},{"DocComment":" these characteristics, Rust does not allow you to reimplement [`Copy`], but you"},{"DocComment":" may reimplement `Clone` and run arbitrary code."},{"DocComment":""},{"DocComment":" Since `Clone` is more general than [`Copy`], you can automatically make anything"},{"DocComment":" [`Copy`] be `Clone` as well."},{"DocComment":""},{"DocComment":" ## Derivable"},{"DocComment":""},{"DocComment":" This trait can be used with `#[derive]` if all fields are `Clone`. The `derive`d"},{"DocComment":" implementation of [`Clone`] calls [`clone`] on each field."},{"DocComment":""},{"DocComment":" [`clone`]: Clone::clone"},{"DocComment":""},{"DocComment":" For a generic struct, `#[derive]` implements `Clone` conditionally by adding bound `Clone` on"},{"DocComment":" generic parameters."},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" // `derive` implements Clone for Reading<T> when T is Clone."},{"DocComment":" #[derive(Clone)]"},{"DocComment":" struct Reading<T> {"},{"DocComment":"     frequency: T,"},{"DocComment":" }"},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" ## How can I implement `Clone`?"},{"DocComment":""},{"DocComment":" Types that are [`Copy`] should have a trivial implementation of `Clone`. More formally:"},{"DocComment":" if `T: Copy`, `x: T`, and `y: &T`, then `let x = y.clone();` is equivalent to `let x = *y;`."},{"DocComment":" Manual implementations should be careful to uphold this invariant; however, unsafe code"},{"DocComment":" must not rely on it to ensure memory safety."},{"DocComment":""},{"DocComment":" An example is a generic struct holding a function pointer. In this case, the"},{"DocComment":" implementation of `Clone` cannot be `derive`d, but can be implemented as:"},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" struct Generate<T>(fn() -> T);"},{"DocComment":""},{"DocComment":" impl<T> Copy for Generate<T> {}"},{"DocComment":""},{"DocComment":" impl<T> Clone for Generate<T> {"},{"DocComment":"     fn clone(&self) -> Self {"},{"DocComment":"         *self"},{"DocComment":"     }"},{"DocComment":" }"},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" If we `derive`:"},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" #[derive(Copy, Clone)]"},{"DocComment":" struct Generate<T>(fn() -> T);"},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" the auto-derived implementations will have unnecessary `T: Copy` and `T: Clone` bounds:"},{"DocComment":""},{"DocComment":" ```"},{"DocComment":" # struct Generate<T>(fn() -> T);"},{"DocComment":""},{"DocComment":" // Automatically derived"},{"DocComment":" impl<T: Copy> Copy for Generate<T> { }"},{"DocComment":""},{"DocComment":" // Automatically derived"},{"DocComment":" impl<T: Clone> Clone for Generate<T> {"},{"DocComment":"     fn clone(&self) -> Generate<T> {"},{"DocComment":"         Generate(Clone::clone(&self.0))"},{"DocComment":"     }"},{"DocComment":" }"},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" The bounds are unnecessary because clearly the function itself should be"},{"DocComment":" copy- and cloneable even if its return type is not:"},{"DocComment":""},{"DocComment":" ```compile_fail,E0599"},{"DocComment":" #[derive(Copy, Clone)]"},{"DocComment":" struct Generate<T>(fn() -> T);"},{"DocComment":""},{"DocComment":" struct NotCloneable;"},{"DocComment":""},{"DocComment":" fn generate_not_cloneable() -> NotCloneable {"},{"DocComment":"     NotCloneable"},{"DocComment":" }"},{"DocComment":""},{"DocComment":" Generate(generate_not_cloneable).clone(); // error: trait bounds were not satisfied"},{"DocComment":" // Note: With the manual implementations the above line will compile."},{"DocComment":" ```"},{"DocComment":""},{"DocComment":" ## `Clone` and `PartialEq`/`Eq`"},{"DocComment":" `Clone` is intended for the duplication of objects. Consequently, when implementing"},{"DocComment":" both `Clone` and [`PartialEq`], the following property is expected to hold:"},{"DocComment":" ```text"},{"DocComment":" x == x -> x.clone() == x"},{"DocComment":" ```"},{"DocComment":" In other words, if an object compares equal to itself,"},{"DocComment":" its clone must also compare equal to the original."},{"DocComment":""},{"DocComment":" For types that also implement [`Eq`] – for which `x == x` always holds –"},{"DocComment":" this implies that `x.clone() == x` must always be true."},{"DocComment":" Standard library collections such as"},{"DocComment":" [`HashMap`], [`HashSet`], [`BTreeMap`], [`BTreeSet`] and [`BinaryHeap`]"},{"DocComment":" rely on their keys respecting this property for correct behavior."},{"DocComment":" Furthermore, these collections require that cloning a key preserves the outcome of the"},{"DocComment":" [`Hash`] and [`Ord`] methods. Thankfully, this follows automatically from `x.clone() == x`"},{"DocComment":" if `Hash` and `Ord` are correctly implemented according to their own requirements."},{"DocComment":""},{"DocComment":" When deriving both `Clone` and [`PartialEq`] using `#[derive(Clone, PartialEq)]`"},{"DocComment":" or when additionally deriving [`Eq`] using `#[derive(Clone, PartialEq, Eq)]`,"},{"DocComment":" then this property is automatically upheld – provided that it is satisfied by"},{"DocComment":" the underlying types."},{"DocComment":""},{"DocComment":" Violating this property is a logic error. The behavior resulting from a logic error is not"},{"DocComment":" specified, but users of the trait must ensure that such logic errors do *not* result in"},{"DocComment":" undefined behavior. This means that `unsafe` code **must not** rely on this property"},{"DocComment":" being satisfied."},{"DocComment":""},{"DocComment":" ## Additional implementors"},{"DocComment":""},{"DocComment":" In addition to the [implementors listed below][impls],"},{"DocComment":" the following types also implement `Clone`:"},{"DocComment":""},{"DocComment":" * Function item types (i.e., the distinct types defined for each function)"},{"DocComment":" * Function pointer types (e.g., `fn() -> i32`)"},{"DocComment":" * Closure types, if they capture no value from the environment"},{"DocComment":"   or if all such captured values implement `Clone` themselves."},{"DocComment":"   Note that variables captured by shared reference always implement `Clone`"},{"DocComment":"   (even if the referent doesn't),"},{"DocComment":"   while variables captured by mutable reference never implement `Clone`."},{"DocComment":""},{"DocComment":" [`HashMap`]: ../../std/collections/struct.HashMap.html"},{"DocComment":" [`HashSet`]: ../../std/collections/struct.HashSet.html"},{"DocComment":" [`BTreeMap`]: ../../std/collections/struct.BTreeMap.html"},{"DocComment":" [`BTreeSet`]: ../../std/collections/struct.BTreeSet.html"},{"DocComment":" [`BinaryHeap`]: ../../std/collections/struct.BinaryHeap.html"},{"DocComment":" [impls]: #implementors"},{"Unknown":{"path":"rustc_diagnostic_item","args":"\"Clone\""}},{"Unknown":{"path":"rustc_trivial_field_reads","args":null}}],"inline":null,"rename":null,"public":true},"is_local":false,"opacity":"Foreign","lang_item":"clone"},"generics":{"regions":[],"types":[{"index":0,"name":"Self"}],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"implied_clauses":[null],"consts":[],"types":[],"methods":[{"params":{"regions":[{"index":0,"name":null}],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"skip_binder":{"name":"clone","item":{"id":5,"generics":{"regions":[{"Var":{"Bound":[0,0]}}],"types":[{"TypeVar":{"Free":0}}],"const_generics":[],"trait_refs":[{"kind":"SelfId","trait_decl_ref":{"regions":[],"skip_binder":{"id":0,"generics":{"regions":[],"types":[{"TypeVar":{"Free":0}}],"const_generics":[],"trait_refs":[]}}}}]}}},"kind":{"TraitMethod":[0,"clone"]}}],"vtable":null},null,null,null],"trait_impls":[{"def_id":0,"item_meta":{"name":[{"Ident":["core",0]},{"Ident":["clone",0]},{"Ident":["impls",0]},{"Impl":{"Trait":0}}],"span":{"data":{"file_id":1,"beg":{"line":579,"col":16},"end":{"line":579,"col":39}},"generated_from_span":null},"source_text":null,"attr_info":{"attributes":[],"inline":null,"rename":null,"public":false},"is_local":false,"opacity":"Foreign","lang_item":null},"impl_trait":{"id":0,"generics":{"regions":[],"types":[{"Literal":{"Int":"I32"}}],"const_generics":[],"trait_refs":[]}},"generics":{"regions":[],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"implied_trait_refs":[null],"consts":[],"types":[],"methods":[["clone",{"params":{"regions":[{"index":0,"name":null}],"types":[],"const_generics":[],"trait_clauses":[],"regions_outlive":[],"types_outlive":[],"trait_type_constraints":[]},"skip_binder":{"id":3,"generics":{"regions":[{"Var":{"Bound":[0,0]}}],"types":[],"const_generics":[],"trait_refs":[]}},"kind":{"TraitMethod":[0,"clone"]}}]],"vtable":null}],"unit_metadata":{"id":0,"generics":{"regions":[],"types":[],"const_generics":[],"trait_refs":[]}},"ordered_decls":[{"TraitDecl":{"NonRec":0}},{"Fun":{"NonRec":5}},{"Fun":{"NonRec":3}},{"TraitImpl":{"NonRec":0}},{"Fun":{"NonRec":0}},{"Global":{"NonRec":0}},{"Fun":{"NonRec":2}},{"Fun":{"NonRec":1}}]}}